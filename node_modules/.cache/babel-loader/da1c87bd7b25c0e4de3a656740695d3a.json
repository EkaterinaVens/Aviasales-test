{"ast":null,"code":"class AviasalesService {\n  constructor() {\n    this.url = \"https://aviasales-test-api.kata.academy/\";\n    this.imageCDN = \"https://pics.avs.io/99/36/\";\n  }\n  async makeRequest(url, params = {}) {\n    const response = await fetch(url, params);\n    if (response.status === 404) {\n      throw new Error(\"404\");\n    }\n    if (response.status === 500) {\n      throw new Error(\"500\");\n    }\n    const result = response.json();\n    return result;\n  }\n  async getSearchId() {\n    if (AviasalesService.searchId) {\n      return AviasalesService.searchId;\n    }\n    const body = await this.makeRequest(`${this.url}/search`);\n    AviasalesService.searchId = body.searchId;\n    return Promise.resolve(body.searchId);\n  }\n  async getTickets(searchId) {\n    const body = await this.makeRequest(`${this.url}/tickets?searchId=${searchId}`);\n    return body;\n  }\n  getCarrierLogo(carrier) {\n    return `${this.imageCDN}${carrier}.png`;\n  }\n}\nconst aviaService = new AviasalesService();\nexport default aviaService;","map":{"version":3,"names":["AviasalesService","constructor","url","imageCDN","makeRequest","params","response","fetch","status","Error","result","json","getSearchId","searchId","body","Promise","resolve","getTickets","getCarrierLogo","carrier","aviaService"],"sources":["/Users/kate/Desktop/react-apps/s_aviasales-master/src/services/apiService.js"],"sourcesContent":["class AviasalesService {\n  static searchId;\n\n  url = \"https://aviasales-test-api.kata.academy/\";\n\n  imageCDN = \"https://pics.avs.io/99/36/\";\n\n  async makeRequest(url, params = {}) {\n    const response = await fetch(url, params);\n    if (response.status === 404) {\n      throw new Error(\"404\");\n    }\n    if (response.status === 500) {\n      throw new Error(\"500\");\n    }\n    const result = response.json();\n    return result;\n  }\n\n  async getSearchId() {\n    if (AviasalesService.searchId) {\n      return AviasalesService.searchId;\n    }\n    const body = await this.makeRequest(`${this.url}/search`);\n    AviasalesService.searchId = body.searchId;\n    return Promise.resolve(body.searchId);\n  }\n\n  async getTickets(searchId) {\n    const body = await this.makeRequest(\n      `${this.url}/tickets?searchId=${searchId}`\n    );\n    return body;\n  }\n\n  getCarrierLogo(carrier) {\n    return `${this.imageCDN}${carrier}.png`;\n  }\n}\n\nconst aviaService = new AviasalesService();\n\nexport default aviaService;\n"],"mappings":"AAAA,MAAMA,gBAAgB,CAAC;EAAAC,YAAA;IAAA,KAGrBC,GAAG,GAAG,0CAA0C;IAAA,KAEhDC,QAAQ,GAAG,4BAA4B;EAAA;EAEvC,MAAMC,WAAWA,CAACF,GAAG,EAAEG,MAAM,GAAG,CAAC,CAAC,EAAE;IAClC,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACL,GAAG,EAAEG,MAAM,CAAC;IACzC,IAAIC,QAAQ,CAACE,MAAM,KAAK,GAAG,EAAE;MAC3B,MAAM,IAAIC,KAAK,CAAC,KAAK,CAAC;IACxB;IACA,IAAIH,QAAQ,CAACE,MAAM,KAAK,GAAG,EAAE;MAC3B,MAAM,IAAIC,KAAK,CAAC,KAAK,CAAC;IACxB;IACA,MAAMC,MAAM,GAAGJ,QAAQ,CAACK,IAAI,CAAC,CAAC;IAC9B,OAAOD,MAAM;EACf;EAEA,MAAME,WAAWA,CAAA,EAAG;IAClB,IAAIZ,gBAAgB,CAACa,QAAQ,EAAE;MAC7B,OAAOb,gBAAgB,CAACa,QAAQ;IAClC;IACA,MAAMC,IAAI,GAAG,MAAM,IAAI,CAACV,WAAW,CAAE,GAAE,IAAI,CAACF,GAAI,SAAQ,CAAC;IACzDF,gBAAgB,CAACa,QAAQ,GAAGC,IAAI,CAACD,QAAQ;IACzC,OAAOE,OAAO,CAACC,OAAO,CAACF,IAAI,CAACD,QAAQ,CAAC;EACvC;EAEA,MAAMI,UAAUA,CAACJ,QAAQ,EAAE;IACzB,MAAMC,IAAI,GAAG,MAAM,IAAI,CAACV,WAAW,CAChC,GAAE,IAAI,CAACF,GAAI,qBAAoBW,QAAS,EAC3C,CAAC;IACD,OAAOC,IAAI;EACb;EAEAI,cAAcA,CAACC,OAAO,EAAE;IACtB,OAAQ,GAAE,IAAI,CAAChB,QAAS,GAAEgB,OAAQ,MAAK;EACzC;AACF;AAEA,MAAMC,WAAW,GAAG,IAAIpB,gBAAgB,CAAC,CAAC;AAE1C,eAAeoB,WAAW"},"metadata":{},"sourceType":"module"}