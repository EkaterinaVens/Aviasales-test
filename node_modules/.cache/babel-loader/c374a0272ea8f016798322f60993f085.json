{"ast":null,"code":"var _jsxFileName = \"/Users/kate/Desktop/react-apps/aviasales/src/components/ticket-list/ticket-list.jsx\";\nimport React, { useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { debounce } from 'lodash';\nimport cls from './ticket-list.module.scss';\nimport Ticket from '../ticket';\nimport { useEventListener } from '../../hooks';\nconst renderTickets = tickets => {\n  return tickets.map((ticket, id) =>\n  /*#__PURE__*/\n  // eslint-disable-next-line react/no-array-index-key\n  React.createElement(\"li\", {\n    className: cls.item,\n    key: id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 11,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Ticket, {\n    ticket: ticket,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 12,\n      columnNumber: 7\n    }\n  })));\n};\nconst uploadTickets = setShownTickets => {\n  return debounce(() => {\n    const {\n      scrollTop,\n      scrollHeight,\n      clientHeight\n    } = document.documentElement;\n    if (scrollTop >= scrollHeight - clientHeight) {\n      setShownTickets(value => value + 5);\n    }\n  }, 1500);\n};\nconst renderSpinner = () => {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cls.spinner,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 10\n    }\n  }, \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430\");\n};\nfunction TicketList() {\n  const tickets = useSelector(state => state.readyTickets);\n  const [shownTickets, setShownTickets] = useState(5);\n  useEventListener('scroll', uploadTickets(setShownTickets));\n  return /*#__PURE__*/React.createElement(\"ul\", {\n    className: cls.list,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 5\n    }\n  }, renderTickets(tickets.slice(0, shownTickets)), shownTickets < tickets.length && renderSpinner());\n}\nexport default TicketList;","map":{"version":3,"names":["React","useState","useSelector","debounce","cls","Ticket","useEventListener","renderTickets","tickets","map","ticket","id","createElement","className","item","key","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","uploadTickets","setShownTickets","scrollTop","scrollHeight","clientHeight","document","documentElement","value","renderSpinner","spinner","TicketList","state","readyTickets","shownTickets","list","slice","length"],"sources":["/Users/kate/Desktop/react-apps/aviasales/src/components/ticket-list/ticket-list.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { debounce } from 'lodash';\nimport cls from './ticket-list.module.scss';\nimport Ticket from '../ticket';\nimport { useEventListener } from '../../hooks';\n\nconst renderTickets = (tickets) => {\n  return tickets.map((ticket, id) => (\n    // eslint-disable-next-line react/no-array-index-key\n    <li className={cls.item} key={id}>\n      <Ticket ticket={ticket} />\n    </li>\n  ));\n};\n\nconst uploadTickets = (setShownTickets) => {\n  return debounce(() => {\n    const { scrollTop, scrollHeight, clientHeight } = document.documentElement;\n    if (scrollTop >= scrollHeight - clientHeight) {\n      setShownTickets((value) => value + 5);\n    }\n  }, 1500);\n};\n\nconst renderSpinner = () => {\n  return <div className={cls.spinner}>Загрузка</div>;\n};\n\nfunction TicketList() {\n  const tickets = useSelector((state) => state.readyTickets);\n  const [shownTickets, setShownTickets] = useState(5);\n\n  useEventListener('scroll', uploadTickets(setShownTickets));\n\n  return (\n    <ul className={cls.list}>\n      {renderTickets(tickets.slice(0, shownTickets))}\n      {shownTickets < tickets.length && renderSpinner()}\n    </ul>\n  );\n}\n\nexport default TicketList;\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,SAASC,WAAW,QAAQ,aAAa;AACzC,SAASC,QAAQ,QAAQ,QAAQ;AACjC,OAAOC,GAAG,MAAM,2BAA2B;AAC3C,OAAOC,MAAM,MAAM,WAAW;AAC9B,SAASC,gBAAgB,QAAQ,aAAa;AAE9C,MAAMC,aAAa,GAAIC,OAAO,IAAK;EACjC,OAAOA,OAAO,CAACC,GAAG,CAAC,CAACC,MAAM,EAAEC,EAAE;EAAA;EAC5B;EACAX,KAAA,CAAAY,aAAA;IAAIC,SAAS,EAAET,GAAG,CAACU,IAAK;IAACC,GAAG,EAAEJ,EAAG;IAAAK,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC/BrB,KAAA,CAAAY,aAAA,CAACP,MAAM;IAACK,MAAM,EAAEA,MAAO;IAAAM,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CACvB,CACL,CAAC;AACJ,CAAC;AAED,MAAMC,aAAa,GAAIC,eAAe,IAAK;EACzC,OAAOpB,QAAQ,CAAC,MAAM;IACpB,MAAM;MAAEqB,SAAS;MAAEC,YAAY;MAAEC;IAAa,CAAC,GAAGC,QAAQ,CAACC,eAAe;IAC1E,IAAIJ,SAAS,IAAIC,YAAY,GAAGC,YAAY,EAAE;MAC5CH,eAAe,CAAEM,KAAK,IAAKA,KAAK,GAAG,CAAC,CAAC;IACvC;EACF,CAAC,EAAE,IAAI,CAAC;AACV,CAAC;AAED,MAAMC,aAAa,GAAGA,CAAA,KAAM;EAC1B,oBAAO9B,KAAA,CAAAY,aAAA;IAAKC,SAAS,EAAET,GAAG,CAAC2B,OAAQ;IAAAf,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,kDAAa,CAAC;AACpD,CAAC;AAED,SAASW,UAAUA,CAAA,EAAG;EACpB,MAAMxB,OAAO,GAAGN,WAAW,CAAE+B,KAAK,IAAKA,KAAK,CAACC,YAAY,CAAC;EAC1D,MAAM,CAACC,YAAY,EAAEZ,eAAe,CAAC,GAAGtB,QAAQ,CAAC,CAAC,CAAC;EAEnDK,gBAAgB,CAAC,QAAQ,EAAEgB,aAAa,CAACC,eAAe,CAAC,CAAC;EAE1D,oBACEvB,KAAA,CAAAY,aAAA;IAAIC,SAAS,EAAET,GAAG,CAACgC,IAAK;IAAApB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GACrBd,aAAa,CAACC,OAAO,CAAC6B,KAAK,CAAC,CAAC,EAAEF,YAAY,CAAC,CAAC,EAC7CA,YAAY,GAAG3B,OAAO,CAAC8B,MAAM,IAAIR,aAAa,CAAC,CAC9C,CAAC;AAET;AAEA,eAAeE,UAAU"},"metadata":{},"sourceType":"module"}